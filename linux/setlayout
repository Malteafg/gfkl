#!/bin/sh

if [[ $# -eq 0 ]] ; then
    echo "Following keyboard layouts are available:

    wokmok
    wokmok_dk
    wokmok_us

    dk
    us

    layer5_wokmok_dk
    layer5_wokmok_us
    layer5_dk
    layer5_us
    "
    exit 0
fi

if command -v xcape &> /dev/null
then
    killall -q xcape
fi

case "$1" in
    "wokmok") 
        if ! command -v xcape &> /dev/null
        then
            echo "ERROR: wokmok should not be used without xcape installed. Note that xcape is not available on wayland"
            exit 0
        fi
        setxkbmap -layout layer5 -variant wokmok_gfkl -model pc105
        xcape -e '#66=Escape;#36=Return;#64=F12;#65=space' -t 180
        ;;
    "wokmok_dk") 
        setxkbmap -layout wokmok -variant dk -model pc105
        ;;
    "wokmok_us") 
        setxkbmap -layout wokmok -variant us -model pc105
        ;;
    "dk")
        # setxkbmap -layout dk -model pc105 -option altwin:swap_lalt_lwin
        setxkbmap -layout dk -model pc105
        # xcape -e '#64=F12' -t 180
        ;;
    "us")
        # setxkbmap -layout us -variant altgr-intl -model pc105 -option altwin:swap_lalt_lwin
        setxkbmap -layout us -variant altgr-intl -model pc105
        # xcape -e '#64=F12' -t 180
        ;;
    "layer5_wokmok_dk")
        setxkbmap -layout layer5 -variant wokmok_dk -model pc105
        ;;
    "layer5_wokmok_us")
        setxkbmap -layout layer5 -variant wokmok_us -model pc105
        ;;
    "layer5_dk")
        setxkbmap -layout layer5 -variant dk -model pc105
        ;;
    "layer5_us")
        setxkbmap -layout layer5 -variant us -model pc105
        ;;
esac
